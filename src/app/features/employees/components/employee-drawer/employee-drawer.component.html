<div class="drawer-shell">
  <div class="drawer-header d-flex align-items-center justify-content-between">
    <div class="drawer-title d-flex align-items-center gap-2">
      <button mat-icon-button disabled class="icon-round"><mat-icon>add</mat-icon></button>
      <h3>Add Employee</h3>
    </div>

    <button mat-icon-button (click)="onCancelClick()"><mat-icon>close</mat-icon></button>
  </div>

  <div class="drawer-body">
    <!-- avatar upload area -->
    <div class="avatar-drop" (drop)="onDrop($event)" (dragover)="onDragOver($event)"
      (click)="$event.stopPropagation(); fileInput.click()">
      <input #fileInput type="file" accept="image/*" hidden (change)="onFilePicked($any($event.target).files)" />
      <ng-container *ngIf="avatarPreview; else emptyDrop">
        <img [src]="avatarPreview" alt="avatar preview" class="avatar-preview" />
      </ng-container>
      <ng-template #emptyDrop>
        <div class="avatar-placeholder">
          <mat-icon>image</mat-icon>
          <div class="drop-label">Drop your photo here or <span class="browse-link">browse</span></div>
        </div>
      </ng-template>
    </div>

    <form [formGroup]="form" class="full-form" (ngSubmit)="submit()">
      <section class="section-card">
        <div class="section-title">Basic Details</div>

        <div class="form-group full-width">
          <label class="field-label">Client <span class="required">*</span></label>
          <mat-form-field appearance="outline">
            <mat-select formControlName="client">
              <mat-option *ngFor="let c of clients" [value]="c">{{ c }}</mat-option>
            </mat-select>
            <mat-error *ngIf="form.get('client')?.hasError('required')">Required</mat-error>
          </mat-form-field>
        </div>

        <div class="grid-2">
          <div class="form-group">
            <label class="field-label">Worksite Location <span class="required">*</span></label>
            <mat-form-field appearance="outline">
              <mat-select formControlName="worksiteLocation">
                <mat-option *ngFor="let w of worksiteLocations" [value]="w">{{ w }}</mat-option>
              </mat-select>
              <mat-error *ngIf="form.get('worksiteLocation')?.hasError('required')">Required</mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <label class="field-label">Pay Group <span class="required">*</span></label>
            <mat-form-field appearance="outline">
              <mat-select formControlName="payGroup">
                <mat-option *ngFor="let p of payGroups" [value]="p">{{ p }}</mat-option>
              </mat-select>
              <mat-error *ngIf="form.get('payGroup')?.hasError('required')">Required</mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="form-group full-width">
          <label class="field-label">Tax Type <span class="required">*</span></label>
          <mat-form-field appearance="outline">
            <mat-select formControlName="taxType">
              <mat-option *ngFor="let t of taxTypes" [value]="t">{{ t }}</mat-option>
            </mat-select>
            <mat-error *ngIf="form.get('taxType')?.hasError('required')">Required</mat-error>
          </mat-form-field>
        </div>

        <div class="grid-2">
          <div class="form-group">
            <label class="field-label">First Name <span class="required">*</span></label>
            <mat-form-field appearance="outline">
              <input matInput formControlName="firstName" />
              <mat-error *ngIf="form.get('firstName')?.hasError('required')">Required</mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <label class="field-label">Middle Name</label>
            <mat-form-field appearance="outline">
              <input matInput formControlName="middleName" />
            </mat-form-field>
          </div>
        </div>

        <div class="grid-2">
          <div class="form-group">
            <label class="field-label">Last Name <span class="required">*</span></label>
            <mat-form-field appearance="outline">
              <input matInput formControlName="lastName" />
              <mat-error *ngIf="form.get('lastName')?.hasError('required')">Required</mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <label class="field-label">Email Address <span class="required">*</span></label>
            <mat-form-field appearance="outline">
              <input matInput formControlName="email" />
              <mat-error *ngIf="form.get('email')?.hasError('required')">Required</mat-error>
              <mat-error *ngIf="form.get('email')?.hasError('email')">Invalid email</mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="grid-2">
          <div class="form-group">
            <label class="field-label">Phone Number <span class="required">*</span></label>
            <mat-form-field appearance="outline">
              <input matInput formControlName="phone" />
              <mat-error *ngIf="form.get('phone')?.hasError('required')">Required</mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <label class="field-label">Gender <span class="required">*</span></label>
            <mat-form-field appearance="outline">
              <mat-select formControlName="gender">
                <mat-option *ngFor="let g of genders" [value]="g">{{ g }}</mat-option>
              </mat-select>
              <mat-error *ngIf="form.get('gender')?.hasError('required')">Required</mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="grid-2">
          <div class="form-group">
            <label class="field-label">Marital Status <span class="required">*</span></label>
            <mat-form-field appearance="outline">
              <mat-select formControlName="maritalStatus">
                <mat-option *ngFor="let s of maritalStatuses" [value]="s">{{ s }}</mat-option>
              </mat-select>
              <mat-error *ngIf="form.get('maritalStatus')?.hasError('required')">Required</mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <label class="field-label">Date of Birth <span class="required">*</span></label>
            <mat-form-field appearance="outline">
            <input matInput formControlName="dob" [matDatepicker]="picker">
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error *ngIf="form.get('dob')?.hasError('required')">Required</mat-error>

            </mat-form-field>

          </div>
        </div>

        <div class="grid-2">
          <div class="form-group">
            <label class="field-label">Original Hire Date <span class="required">*</span></label>
            <mat-form-field appearance="outline">
              <input matInput formControlName="originalHireDate" [matDatepicker]="picker2">
              <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
              <mat-datepicker #picker2></mat-datepicker>
              <mat-error *ngIf="form.get('originalHireDate')?.hasError('required')">Required</mat-error>

            </mat-form-field>
          </div>

          <div class="form-group">
            <label class="field-label">Employment Type <span class="required">*</span></label>
            <mat-form-field appearance="outline">
              <mat-select formControlName="employeeType">
                <mat-option *ngFor="let e of employmentTypes" [value]="e">{{ e }}</mat-option>
              </mat-select>
              <mat-error *ngIf="form.get('employeeType')?.hasError('required')">Required</mat-error>
            </mat-form-field>
          </div>
        </div>
      </section>

      <section class="section-card">
        <div class="section-title">Address Details</div>

        <div class="form-group full-width">
          <label class="field-label">Address 1</label>
          <mat-form-field appearance="outline">
            <input matInput formControlName="address1" />
          </mat-form-field>
        </div>
        <div class="form-group full-width">
          <label class="field-label">Address 2</label>
          <mat-form-field appearance="outline">
            <input matInput formControlName="address2" />
          </mat-form-field>
        </div>

        <div class="grid-2">
          <div class="form-group">
            <label class="field-label">Country</label>
            <mat-form-field appearance="outline">
              <mat-select formControlName="country">
                <mat-option value="US">United States</mat-option>
                <mat-option value="CA">Canada</mat-option>
                <mat-option value="UK">United Kingdom</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="form-group">
            <label class="field-label">Zip Code</label>
            <mat-form-field appearance="outline">
              <input matInput formControlName="zipCode" />
            </mat-form-field>
          </div>
        </div>

        <div class="grid-2">
          <div class="form-group">
            <label class="field-label">City</label>
            <mat-form-field appearance="outline">
              <input matInput formControlName="city" />
            </mat-form-field>
          </div>

          <div class="form-group">
            <label class="field-label">State</label>
            <mat-form-field appearance="outline">
              <input matInput formControlName="state" />
            </mat-form-field>
          </div>
        </div>
      </section>

      <div class="drawer-actions" >
        <button mat-raised-button color="primary" type="submit" style="background-color: #323D51;">
          <span >{{this.employee ? 'Update': 'Save'}}</span>
        </button>
      </div>
    </form>
  </div>
</div>